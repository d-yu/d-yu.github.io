<!DOCTYPE html>
<html lang="en">
<head>
        <title>Communication between FPGA and DSP28335</title>
        <meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="shortcut icon" href="./theme/images/favicon.ico"/>
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js" type="text/javascript"></script>


</head>

<body id="index" class="home">
	
  <!-- <header id="banner" class="body"> -->
  <!--               <h1><a href="./"><img src="http://www.launchyard.com/images/logo.png" /><strong>Napon</strong></a></h1> -->
  <!--       </header> --> 

  <div class="LaunchyardDetail">
    <!--  <p> 
    <img src="./theme/images/profile_image.gif" width="200" height="200" alt="Graph icon"> 
    </p>-->
    <p><a id="sitesubtitle" href="./">Napon</a></p>
<p id="sitetagline">Fake it until you make it</p>

    <!-- <ul> -->
    <!--   <li><a href="./pages/about.html">about</a></li> -->
      <!-- <li><a href="./pages/about.html">articles</a></li> -->
<!--  -->
<!--         <br/> -->
<!--         <br/> -->
<!--      -->        
<!--       <li><a href="">Then end of Masterarbeit</a></li> -->
<!--      -->        
<!--       <li><a href="">what is creepage and clearance</a></li> -->
<!--      -->        
<!--       <li><a href="">Religion</a></li> -->
<!--      -->        
<!--       <li><a href="">Life with color</a></li> -->
<!--      -->        
<!--       <li><a href="">GPIO control bugs for 6678L -2</a></li> -->
<!--      -->        
<!--       <li><a href="">GPIO control bugs for 6678L -1</a></li> -->
<!--      -->        
<!--       <li><a href="">Linker to 6678L failed problem</a></li> -->
<!--      -->        
<!--       <li><a href="">A small things makes me a little drunk</a></li> -->
<!--      -->        
<!--       <li><a href="">Rules and guidelines for drawing good schematics</a></li> -->
<!--      -->        
<!--       <li><a href="">mess up with DSP baord</a></li> -->
<!--      -->        
<!--       <li><a href="">Transplanting Protocol to DSP</a></li> -->
<!--      -->        
<!--       <li><a href="">CCS6.1 breakpoint problem</a></li> -->
<!--      -->        
<!--       <li><a href="">DSP6678L-Interrupt</a></li> -->
<!--      -->        
<!--       <li><a href="">DSP6678L-GPIO</a></li> -->
<!--      -->        
<!--       <li><a href="">stack error for downloading 6678L</a></li> -->
<!--      -->        
<!--       <li><a href="">BOM</a></li> -->
<!--      -->        
<!--       <li><a href="">Presentaion Skills</a></li> -->
<!--      -->        
<!--       <li><a href="">Via and pad</a></li> -->
<!--      -->        
<!--       <li><a href="">PCB stackup from Company</a></li> -->
<!--      -->        
<!--       <li><a href="">PCB Stack-up</a></li> -->
<!--      -->        
<!--       <li><a href="">AMC1</a></li> -->
<!--      -->        
<!--       <li><a href="">Summary-HW Design</a></li> -->
<!--      -->        
<!--       <li><a href="">FPGA Design</a></li> -->
<!--      -->        
<!--       <li><a href="">VCCIO and LVDS input</a></li> -->
<!--      -->        
<!--       <li><a href="">LVDS differential input pairs in FPGA</a></li> -->
<!--      -->        
<!--       <li><a href="">Tx0106/0108 Voltage transfer & Buffer</a></li> -->
<!--      -->        
<!--       <li><a href="">Cyclone III Devices Single-Ended I/O Standard</a></li> -->
<!--      -->        
<!--       <li><a href="">Changing the Values and names at ONCE in AD</a></li> -->
<!--      -->        
<!--       <li><a href="">Design of FPGA-Board(Cyclone3)</a></li> -->
<!--      -->        
<!--       <li><a href="">Picking Resistors for LEDs</a></li> -->
<!--      -->        
<!--       <li><a href="">ADC board design</a></li> -->
<!--      -->        
<!--       <li><a href="">Pelican blog</a></li> -->
<!--      -->        
<!--       <li><a href="">ADC protection circuit design</a></li> -->
<!--      -->        
<!--       <li><a href="">Questions of HW design</a></li> -->
<!--      -->        
<!--       <li><a href="">Generating Libs for Altium Design</a></li> -->
<!--      -->        
<!--       <li><a href="">Communication between FPGA and DSP28335</a></li> -->
<!--      -->        
<!--       <li><a href="">GPIO DIR change limit</a></li> -->
<!--      -->        
<!--       <li><a href="">28335 C skills</a></li> -->
<!--      -->        
<!--       <li><a href="">DSP28335 GPIO</a></li> -->
<!--      -->        
<!--       <li><a href="">Tristate_FPGA</a></li> -->
<!--      -->        
<!--       <li><a href="">VHDL</a></li> -->
<!--      -->
<!--  -->
    <!-- </ul> -->

    <!-- This belongs in the about page -->
      <!--  -->

<ul>
	<li><a href="./category/leben.html">leben</a></li>
	<li><a href="./category/masterarbeit.html">Masterarbeit</a></li>
</ul>
 
 
     <p>
	<a id="aboutlink" href="./pages/about.html">about</a>
	</p>
 
 
  </div>

<section id="content" >
    <div class="body">
      <article>
        <header>
          <h1 class="entry-title">
            <a href="./communication-between-fpga-and-dsp28335.html" rel="bookmark"
               title="Permalink to Communication between FPGA and DSP28335">Communication between FPGA and DSP28335</a></h1>

        </header>

        <div class="entry-content">
<div class="post-info">
	<ul>
        <li class="vcard author">
                 by&nbsp;<a class="url fn" href="./author/d-yu.html">d-yu</a>
        </li>
        <li class="published" title="2015-04-25T13:58:12+02:00">
          on&nbsp;Sa 25 April 2015
        </li>

	</ul>

</div><!-- /.post-info -->          <h2>Communication between FPGA and DSP28335</h2>
<h3><em>This project want to creat a protocol between FPGA and DSP by using only 16 pins.</em></h3>
<p>注意： VHDL的运行方式永远是并行的，所以进入某一个状态之后，它的输出ACK马上生效，而不像DSP中的C代码，进入一个状态后，需要一步一步执行，到最后才发送ACK信号。</p>
<h2>引脚分配/Pin Assignment</h2>
<p><img alt="Imgur" src="http://i.imgur.com/w4vwVlr.png" /></p>
<h2>Logic in DSP - FSM</h2>
<p>I mainly creat two functions: <code>void Read_Adc(int addr0)</code> and <code>Send ()</code>.
both of them are totally independent with each other and runs alway from State 0 start.</p>
<div class="highlight"><pre>interrupt void xint2_isr(void)
{

    GpioDataRegs.GPBSET.bit.GPIO34 = 1;

//////////////// state 0/////////////////////////
         GpioDataRegs.GPACLEAR.bit.GPIO3 = 1;
         Gpio_Select(0) ;  // GPIO- output
// enter the communication program accroding to the FPGA_CLK
                     //  0B0010
   Read_Adc(3);
   //0B0011
 Read_Adc(0);

 Send(5,7,8);  // send the data
        GpioDataRegs.GPBCLEAR.bit.GPIO34 = 1;
    // Acknowledge this interrupt to get more from group 1
    PieCtrlRegs.PIEACK.all = PIEACK_GROUP1;   //clear the irq-flag
}
</pre></div>


<p><strong>1.Read_Adc(); -- Stucture</strong>
<img alt="Imgur" src="http://i.imgur.com/GXhxSN8.jpg" /></p>
<p><strong>Je nach den verschiedne addr0, kann es aber underschiedliche Address nach FPGA senden.</strong> </p>
<hr />
<p>0000 -&gt; get the ADC channel 0 value.</p>
<p>0001 -&gt; get the ADC channel 1 value.</p>
<p>0010 -&gt; get the ADC channel 2 value.</p>
<p>0011 -&gt; get all the ADC channels(0,1,2) values.</p>
<hr />
<p><strong>2.void Send(int data0, int data1, int data2); -- Stucture</strong></p>
<p><img alt="Imgur" src="http://i.imgur.com/qxsAmHL.jpg" /></p>
<p><strong>NOTE:  原本我是设定成从S10直接到S12，但是其实FPGA是在接收到DSP_ACK = 0的时候才跳转到S8状态，如果没有S11直接马上进入S12的话，发送的数据DATA1会覆盖原来S10发送的地址。如此一来，FPGA内部的代码就不能有效读取地址，判断状态机的跳转了。</strong></p>
<p>Because here the pins that i used are not in a bank or a group and they are 
distributed. So it is hard to send a Data directly to the DATA register and the Data must be set to the each bit pin one by one. 
According to the TI </p>
<blockquote>
<p>When using the GPxDAT register to change the level of an output pin, you should be cautious not to
accidentally change the level of another pin. For example, if you mean to change the output latch level
of GPIOA0 by writing to the GPADAT register bit 0, using a read-modify-write instruction. The problem
can occur if another I/O port A signal changes level between the read and the write stage of the
instruction. You can also change the state of that output latch. You can avoid this scenario by using
the GPxSET, GPxCLEAR, and GPxTOGGLE registers to load the output latch instead.</p>
</blockquote>
<p><strong>so i always using GPxSET and GPxCLEAR and GPxTOGGLE functions.</strong></p>
<hr />
<p><strong>An example Code for the data0 value to the 13 Datebus pins.</strong> </p>
<div class="highlight"><pre><span class="o">////////////////</span> <span class="nt">state</span> <span class="nt">12</span> <span class="nt">send</span> <span class="nt">the</span> <span class="nt">1st</span> <span class="nt">data</span><span class="o">/////////////////////////</span>
            <span class="nt">if</span><span class="o">(</span><span class="nt">state_flag</span> <span class="o">==</span> <span class="nt">11</span><span class="o">)</span>
            <span class="p">{</span>
                <span class="n">while</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
                <span class="err">{</span>
                    <span class="n">FPGA_ACK</span> <span class="o">=</span> <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPADAT</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO5</span><span class="p">;</span>
                    <span class="n">if</span><span class="p">(</span><span class="n">FPGA_ACK</span> <span class="o">==</span> <span class="m">0</span> <span class="p">)</span>
                    <span class="err">{</span>
                    <span class="o">//</span>  <span class="n">Gpio_Select</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>  <span class="o">//</span> <span class="n">set</span> <span class="n">to</span> <span class="n">input</span>

                        <span class="n">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="m">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="m">13</span> <span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
                        <span class="err">{</span>
                        <span class="n">if</span><span class="p">(</span><span class="n">getBit</span><span class="p">(</span><span class="n">data0</span><span class="o">,</span> <span class="n">j</span><span class="p">))</span>
                        <span class="err">{</span>
                            <span class="o">//</span><span class="n">dsp</span><span class="cp">[</span><span class="nx">j</span><span class="cp">]</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                            <span class="n">switch</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
                            <span class="err">{</span>
                            <span class="n">case</span> <span class="m">1</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPASET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO31</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">2</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPASET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO29</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">3</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPASET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO23</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">4</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPASET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO21</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">5</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPASET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO19</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">6</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPASET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO17</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">7</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPASET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO27</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">8</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPASET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO25</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">9</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPCSET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO85</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">10</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPBSET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO49</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">11</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPASET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO11</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">12</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPASET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO9</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">13</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPASET</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO7</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="k">default</span><span class="o">:</span> <span class="n">break</span><span class="p">;</span>
                            <span class="p">}</span>

                        <span class="err">}</span>
                        <span class="nt">else</span>
                        <span class="p">{</span>
                            <span class="n">switch</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
                            <span class="err">{</span>
                            <span class="n">case</span> <span class="m">1</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPACLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO31</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">2</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPACLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO29</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">3</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPACLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO23</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">4</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPACLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO21</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">5</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPACLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO19</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">6</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPACLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO17</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">7</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPACLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO27</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">8</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPACLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO25</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">9</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPCCLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO85</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">10</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPBCLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO49</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">11</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPACLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO11</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">12</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPACLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO9</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="n">case</span> <span class="m">13</span><span class="o">:</span>
                                <span class="n">GpioDataRegs</span><span class="o">.</span><span class="n">GPACLEAR</span><span class="o">.</span><span class="n">bit</span><span class="o">.</span><span class="n">GPIO7</span> <span class="o">=</span> <span class="m">1</span><span class="p">;</span>
                                <span class="n">break</span><span class="p">;</span>
                            <span class="k">default</span><span class="o">:</span> <span class="n">break</span><span class="p">;</span>
                            <span class="p">}</span>
                        <span class="err">}</span>
                        <span class="err">}</span>
                        <span class="nt">GpioDataRegs</span><span class="nc">.GPASET.bit.GPIO3</span> <span class="o">=</span> <span class="nt">1</span><span class="o">;</span>
                        <span class="nt">state_flag</span> <span class="o">=</span> <span class="nt">13</span><span class="o">;</span>
                        <span class="nt">break</span><span class="o">;</span>
                    <span class="err">}</span>
                <span class="err">}</span>
            <span class="err">}</span>

                <span class="o">//</span> <span class="nt">get</span> <span class="nt">the</span> <span class="nt">Nr</span><span class="o">.</span> <span class="nt">m</span> <span class="nt">bit</span> <span class="nt">of</span> <span class="nt">n</span> <span class="nt">from</span> <span class="nt">low</span> <span class="nt">bit</span> <span class="nt">to</span> <span class="nt">high</span> <span class="nt">bit</span>
                        <span class="nt">int</span> <span class="nt">getBit</span><span class="o">(</span><span class="nt">int</span> <span class="nt">n</span><span class="o">,</span> <span class="nt">int</span> <span class="nt">m</span><span class="o">)</span>
                        <span class="p">{</span>
                        <span class="n">return</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;</span><span class="p">(</span><span class="n">m</span><span class="m">-1</span><span class="p">))</span> <span class="o">&amp;</span> <span class="m">1</span><span class="p">;</span>
                        <span class="p">}</span>
</pre></div>


<h2>Logic in FPGA(VHDL) - FSM</h2>
<p><img alt="Imgur" src="http://i.imgur.com/kGQQFKr.jpg" /></p>
<p>The FSM is written in 3 process with VHDL.
using bi-directional Port in the low level</p>
<div class="highlight"><pre><span class="n">db</span><span class="o">:</span> <span class="n">inout</span> <span class="n">std_logic_vector</span><span class="o">(</span><span class="mi">12</span> <span class="n">downto</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">others</span> <span class="o">=&gt;</span> <span class="s1">&#39;Z&#39;</span><span class="o">);</span>
</pre></div>


<h2>Results</h2>
<ol>
<li><code>Read_Adc(3);</code></li>
</ol>
<p>sending address 0011</p>
<p>VHDL</p>
<div class="highlight"><pre>when S4 =&gt; 
        if(Adc_address = &quot;0011&quot;)then
        Adc_buffer1 := &quot;0&quot; &amp; x&quot;aaa&quot;;
        Adc_buffer2 := &quot;1&quot; &amp; x&quot;000&quot;;
        Adc_buffer3 := &quot;0&quot; &amp; x&quot;555&quot;;
        FPGA_ACK &lt;= &#39;0&#39;;    
        end if;
         led1 &lt;= &quot;111111&quot;;
</pre></div>


<p>DSP will storage the ADC values from FPGA to three array.
<img alt="Imgur" src="http://i.imgur.com/mvrT9gN.png" />
<img alt="Imgur" src="http://i.imgur.com/vNvimvl.png" />
<img alt="Imgur" src="http://i.imgur.com/jwC9kU1.png" /></p>
<p><strong>CORRECT!</strong></p>
<p>2.Send(5,7,8)</p>
<p>The Led will blink !</p>
<p>3.
<img alt="Imgur" src="http://i.imgur.com/371zZrC.png" />
<img alt="Imgur" src="http://i.imgur.com/5DBfwA8.png" /></p>
<ol>
<li>TIME for execution of these three functions
<img alt="Imgur" src="http://i.imgur.com/r0RTCNJ.png" /></li>
</ol>
        </div><!-- /.entry-content -->
        <div class="comments">

          <div id="disqus_thread"></div>
          <script type="text/javascript">
            var disqus_identifier = "communication-between-fpga-and-dsp28335.html";
            (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://d-yu.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
          </script>
        </div>

      </article>
    </div>
</section>
        <section id="extras" >
        
        </section><!-- /#extras -->
	
        <footer id="contentinfo" >
                <address id="about" class="vcard ">
                Proudly powered by <a href="http://getpelican.com/" target="_blank">Pelican</a>, which takes
                great advantage of <a href="http://python.org" target="_blank">Python</a>.
		
                </address><!-- /#about -->
		

                
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63036033-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'd-yu';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>